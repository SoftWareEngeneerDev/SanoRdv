<div class="container py-4">
  <div class="row justify-content-center">
    <div class="col-lg-6 col-md-8">
      <div class="card shadow-sm">
        <div class="card-header bg-white border-bottom-0 pt-4">
          <h1 class="h4 text-center mb-0">Ajouter un patient</h1>
        </div>
        
        <div class="card-body px-4 py-3">
          <form [formGroup]="patientForm" (ngSubmit)="onSubmit()">
            <!-- Nom -->
            <div class="mb-3">
              <label for="lastName" class="form-label fw-semibold">Nom *</label>
              <input type="text" class="form-control form-control-lg" id="lastName" 
                     formControlName="lastName"
                     [ngClass]="{ 'is-invalid': patientForm.get('lastName')?.invalid && patientForm.get('lastName')?.touched }">
              <div *ngIf="patientForm.get('lastName')?.invalid && patientForm.get('lastName')?.touched" 
                   class="invalid-feedback">
                Veuillez entrer le nom du patient
              </div>
            </div>

            <!-- Prénom -->
            <div class="mb-3">
              <label for="firstName" class="form-label fw-semibold">Prénom *</label>
              <input type="text" class="form-control form-control-lg" id="firstName" 
                     formControlName="firstName"
                     [ngClass]="{ 'is-invalid': patientForm.get('firstName')?.invalid && patientForm.get('firstName')?.touched }">
              <div *ngIf="patientForm.get('firstName')?.invalid && patientForm.get('firstName')?.touched" 
                   class="invalid-feedback">
                Veuillez entrer le prénom du patient
              </div>
            </div>

            <!-- Email -->
            <div class="mb-3">
              <label for="email" class="form-label fw-semibold">Adresse mail *</label>
              <input type="email" class="form-control form-control-lg" id="email" 
                     formControlName="email"
                     [ngClass]="{ 'is-invalid': patientForm.get('email')?.invalid && patientForm.get('email')?.touched }">
              <div *ngIf="patientForm.get('email')?.invalid && patientForm.get('email')?.touched" 
                   class="invalid-feedback">
                Veuillez entrer une adresse email valide
              </div>
            </div>

            <!-- Mot de passe -->
            <div class="mb-3">
              <label for="password" class="form-label fw-semibold">Mot de passe *</label>
              <div class="input-group">
                <input [type]="passwordVisible ? 'text' : 'password'" 
                       class="form-control form-control-lg" id="password" 
                       formControlName="password"
                       [ngClass]="{ 'is-invalid': patientForm.get('password')?.invalid && patientForm.get('password')?.touched }">
                <button class="btn btn-outline-secondary" type="button" 
                        (click)="togglePasswordVisibility()">
                  <i class="bi" [ngClass]="passwordVisible ? 'bi-eye-slash' : 'bi-eye'"></i>
                </button>
              </div>
              <div *ngIf="patientForm.get('password')?.invalid && patientForm.get('password')?.touched" 
                   class="invalid-feedback">
                Le mot de passe doit contenir 8 caractères minimum avec majuscule, minuscule, chiffre et caractère spécial
              </div>
            </div>

            <!-- Téléphone -->
            <div class="mb-3">
              <label for="phone" class="form-label fw-semibold">Téléphone *</label>
              <input type="tel" class="form-control form-control-lg" id="phone" 
                     formControlName="phone" placeholder="+226..."
                     [ngClass]="{ 'is-invalid': patientForm.get('phone')?.invalid && patientForm.get('phone')?.touched }">
              <div *ngIf="patientForm.get('phone')?.invalid && patientForm.get('phone')?.touched" 
                   class="invalid-feedback">
                Veuillez entrer un numéro de téléphone valide
              </div>
            </div>

            <!-- Sexe -->
            <div class="mb-4">
              <label class="form-label fw-semibold">Sexe *</label>
              <div class="d-flex gap-3">
                <div class="form-check">
                  <input class="form-check-input" type="radio" id="homme" 
                         value="Homme" formControlName="gender">
                  <label class="form-check-label" for="homme">Homme</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="radio" id="femme" 
                         value="Femme" formControlName="gender">
                  <label class="form-check-label" for="femme">Femme</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="radio" id="autre" 
                         value="Autre" formControlName="gender">
                  <label class="form-check-label" for="autre">Autre</label>
                </div>
              </div>
              <div *ngIf="patientForm.get('gender')?.invalid && patientForm.get('gender')?.touched" 
                   class="text-danger small mt-1">
                Veuillez sélectionner le sexe
              </div>
            </div>

            <!-- Boutons -->
            <div class="d-grid gap-3 d-md-flex justify-content-md-end mt-4">
              <button type="button" class="btn btn-outline-secondary btn-lg px-4"  (click)="cancel()">
                Annuler
              </button>
              <button type="submit" class="btn btn-primary btn-lg px-4" 
                      [disabled]="patientForm.invalid">
                Enregistrer
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>